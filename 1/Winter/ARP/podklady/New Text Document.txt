; Test stisku tlacitka INCR
BLoop	call	Set_7s
	clrf    cnt1		;citac osetreni zakmitu tlacitek
BT2L	btfsc   BT2
        goto    Main		;skok na zacatek - reset
        btfss   BT1		;preskok pri stisku tlacitka (H)
        goto    BLoop		;pri urovni L test od zacatku
        decfsz  cnt1,F
        goto    BT2L
        incf    cntr,F		;zvyseni cntr

; Test uvolneni tlacitka INCR
        clrf    cnt1
BT2H	btfsc   BT1
        goto    $-2
        decfsz  cnt1,F
        goto    BT2H
        goto    BLoop



movlb	.7		;Banka7 s IOC
	btfss	IOCAF,4		;preruseni od BT1(RA4)?
	goto	BT2Int		;je to tedy od BT2...
	bcf	IOCAF,4		;vynulovat priznak od BT1(RA4)
	movlb	.0		;Banka0 s PORT
	
	movlw	.1
	subwf	state,W
	btfss	STATUS,Z
	goto	$+4
	clrw
	addlw	.127
	movwf	INDF0
	
	movlw	.2
	subwf	state,W
	btfss	STATUS,Z
	goto	$+4
	clrw
	addlw	.190
	movwf	INDF0
	
	movlw	.3
	subwf	state,W
	btfss	STATUS,Z
	goto	$+4
	clrw
	addlw	.255
	movwf	INDF0
	
	movlw	.4
	subwf	state,W
	btfss	STATUS,Z
	incf	state,F
	call	Delay100
  	retfie
	
BT2Int	bcf	IOCAF,5		;vynulovat priznak od BT2(RA5)
	movlb	.0		;Banka0 s PORT
	movlw	.4
	subwf	state,W
	btfss	STATUS,Z
	goto	$+4
	clrw
	addlw	.190
	movwf	INDF0
	
	movlw	.3
	subwf	state,W
	btfss	STATUS,Z
	goto	$+4
	clrw
	addlw	.127
	movwf	INDF0
	
	movlw	.2
	subwf	state,W
	btfss	STATUS,Z
	goto	$+4
	clrw
	addlw	.0
	movwf	INDF0
	
	movlw	.1
	subwf	state,W
	btfss	STATUS,Z
	decf	state,F
	call	Delay100
	retfie









;;;;;;;;;;;;;;;;;;;;;;;;;
	
	btfss	BT1		;je to jedna?
	goto	BT2Int		;je to tedy BT2?
	movlb	.0		;Banka0 s PORT
	
	movlw	.1
	subwf	state,W
	btfss	STATUS,Z
	goto	$+7
	clrf	T2CON		;1:1 pre, 1:1 post
	bcf	T2CON,T2CKPS0
	bsf	T2CON,T2CKPS1
	movlw	b'10010100'
	movwf	PR2
	bsf	T2CON,TMR2ON
	
	movlw	.2
	subwf	state,W
	btfss	STATUS,Z
	goto	$+7
	clrf	T2CON		;1:1 pre, 1:1 post
	bsf	T2CON,T2CKPS0
	bcf	T2CON,T2CKPS1
	movlw	b'11111001'
	movwf	PR2
	bsf	T2CON,TMR2ON
	
	movlw	.3
	subwf	state,W
	btfss	STATUS,Z
	goto	$+7
	clrf	T2CON		;1:1 pre, 1:1 post
	bsf	T2CON,T2CKPS0
	bcf	T2CON,T2CKPS1
	movlw	b'01111100'
	movwf	PR2
	bsf	T2CON,TMR2ON
	
	movlw	.4
	subwf	state,W
	btfss	STATUS,Z
	incf	state,F
	call	Delay100
	
  	goto	Main
	
BT2Int	btfss	BT2		;je to dvojka?
	goto	Main
	movlb	.0		;Banka0 s PORT
	movlw	.4
	subwf	state,W
	btfss	STATUS,Z
	goto	$+7
	clrf	T2CON		;1:1 pre, 1:1 post
	bsf	T2CON,T2CKPS0
	bcf	T2CON,T2CKPS1
	movlw	b'01111100'
	movwf	PR2
	bsf	T2CON,TMR2ON
	
	movlw	.3
	subwf	state,W
	btfss	STATUS,Z
	goto	$+7
	clrf	T2CON		;1:1 pre, 1:1 post
	bcf	T2CON,T2CKPS0
	bsf	T2CON,T2CKPS1
	movlw	b'10010100'
	movwf	PR2
	bsf	T2CON,TMR2ON
	
	movlw	.2
	subwf	state,W
	btfss	STATUS,Z
	goto	$+7
	clrf	T2CON		;1:1 pre, 1:1 post
	bsf	T2CON,T2CKPS0
	bsf	T2CON,T2CKPS1
	movlw	b'11111111'
	movwf	PR2
	bsf	T2CON,TMR2ON
	
	movlw	.1
	subwf	state,W
	btfss	STATUS,Z
	decf	state,F
	call	Delay100
	
	goto	Main		;zacykleni